<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
	<meta charset="UTF-8">
	<title>콕션</title>

	<th:block layout:fragment="css">
		<link rel="stylesheet" th:href="@{/css/style_home.css}">
	</th:block>

	<th:block layout:fragment="script">
		<script>
			function remaindTime(e) {
				var now = new Date(); //현재시간을 구한다. 
				var end = new Date($(e).attr("data-end-time"));
				var open = new Date($(e).attr("data-start-time"));

				//오늘날짜의 오전9시 - 오픈시간기준

				var nt = now.getTime(); // 현재의 시간만 가져온다
				var ot = open.getTime(); // 오픈시간만 가져온다
				var et = end.getTime(); // 종료시간만 가져온다.

				if (nt < ot) { //현재시간이 오픈시간보다 이르면 오픈시간까지의 남은 시간을 구한다. 
					var sec = parseInt(ot - nt) / 1000;
					var hour = parseInt(sec / 60 / 60);
					var sec = (sec - (hour * 60 * 60));
					var min = parseInt(sec / 60);
					var sec = parseInt(sec - (min * 60));
					if (hour < 10) {hour = "0" + hour;}
					if (min < 10) {min = "0" + min;}
					if (sec < 10) {sec = "0" + sec;}

					$(e).html("<span style='color:rgb(128, 128, 128)'>" + hour + "시간 " + min + "분 " + sec + "초 후 시작 </span>")
				} else { //현재시간이 오픈시간보다 늦고 마감시간보다 이르면 마감시간까지 남은 시간을 구한다. 
					var sec = parseInt(et - nt) / 1000;
					var hour = parseInt(sec / 60 / 60);
					var sec = (sec - (hour * 60 * 60));
					var min = parseInt(sec / 60);
					var sec = parseInt(sec - (min * 60));
					if (hour < 10) {hour = "0" + hour;}
					if (min < 10) {min = "0" + min;}
					if (sec < 10) {sec = "0" + sec;}

					$(e).text(hour + "시간 " + min + "분 " + sec + "초 후 마감")
				}
			}
			$(function () {
				setInterval(function () {
					$(".timer").each(function (i, e) {
						remaindTime(e);
					})
				}, 1000);
			});

		</script>
	</th:block>

</head>

<body>
	<header th:replace="./fragments/header.html :: header"></header>

	</header>
	<main>
		<div layout:fragment="banner" class="top-slide">
			<div class="carousel slide" data-bs-ride="carousel" id="banner">
				<div class="carousel-indicators">
					<button type="button" data-bs-target="#banner" data-bs-slide-to="0" class="active"></button>
					<button type="button" data-bs-target="#banner" data-bs-slide-to="1"></button>
					<button type="button" data-bs-target="#banner" data-bs-slide-to="2"></button>
				</div>
				<div class="carousel-inner">
					<div class="carousel-item active">
						<img src="/images/banner2.png" width="100%" height="200px" alt="배너1" style="cursor:pointer">
					</div>
					<div class="carousel-item">
						<img src="/images/banner01.gif" loop=infinite width="100%" height="200px" alt="배너2"
							style="cursor:pointer">
					</div>
					<div class="carousel-item">
						<img src="/images/banner3.png" width="100%" height="200px" alt="배너3" style="cursor:pointer">
					</div>
				</div>
				<a href="#banner" class="carousel-control-prev" data-bs-slide="prev">
					<span class="carousel-control-prev-icon"></span>
				</a>
				<a href="#banner" class="carousel-control-next" data-bs-slide="next">
					<span class="carousel-control-next-icon"></span>
				</a>
			</div>
		</div>
	</main>
	<div class="wrap">
		<div class="home1" layout:fragment="content">
			<div class="hot_prod">
				<p id="hot_title">베스트 핫딜</p>
				<div class="step_wrap">
					<div class="hot_prod_list_1 hotlist" th:each="item:${hotProcList}">
						<a href="/item/test">
							<div class="img-box">
								<img th:if="${item.itemFile ne null}"
									th:src="@{/upload/}+${item.itemFile.itemfileNm}"
									style="width:284px; max-width:100%; height:180px; max-height:250px;"/>
								<img th:if="${item.itemFile eq null}"
										th:src="@{/upload/noimg.png}"/>	
							</div>
						</a>
						<div class="con-box">
							<dl>
								<dt th:text="${item.itemNm}">아이폰 14 - 256GB</dt>
								<dd style="min-height:40px;">
									<table>
										<tr>
											<td><b>경매가</b></td>
											<td th:text="${item.itemStPrice}">850,000원</td>
										</tr>
										<tr>
											<td id="pr_name"><b>입찰수</b></td>
											<td>2</td>
										</tr>
										<tr>
											<td id="pr_name"><b>관심수</b></td>
											<td>143</td>
										</tr>
										<tr>
											<td id="pr_name"><b>조회수</b></td>
											<td th:text="${item.itemCnt}">17,111</td>
										</tr>

									</table>

								</dd>
								<p class="timer" colspan="2" data-end-time="2022-08-11T20:00:00+09:00"></p>
							</dl>
						</div>
					</div>
					<!--<div class="hot_prod_list_2 hotlist">
						<div class="img-box">
							<img src="/images/화장품.png"
								style="width:auto; max-width:100%; height:auto; max-height:250px;">
						</div>
						<div class="con-box">
							<dl>
								<dt>가히 링클 바운스 멀티밤</dt>
								<dd style="min-height:40px;">
									<table>
										<tr>
											<td id="pr_name"><b>경매가</b></td>
											<td>46,500원</td>
										</tr>
										<tr>
											<td id="pr_name"><b>입찰수</b></td>
											<td>180</td>
										</tr>
										<tr>
											<td id="pr_name"><b>관심수</b></td>
											<td>55</td>
										</tr>
										<tr>
											<td id="pr_name"><b>조회수</b></td>
											<td>21,867</td>
										</tr>

									</table>

								</dd>
								<p class="timer" colspan="2" data-end-time="2022-08-16T10:00:00+09:00"></p>
							</dl>
						</div>
					</div>
					<div class="hot_prod_list_3 hotlist">
						<div class="img-box">
							<img src="/images/운동화.png"
								style="width:auto; max-width:100%; height:auto; max-height:250px;">
						</div>
						<div class="con-box">
							<dl>
								<dt>휠라 꼬모 FS1SIB127</dt>
								<dd style="min-height:40px;">
									<table>
										<tr>
											<td id="pr_name"><b>경매가</b></td>
											<td>25,000원</td>
										</tr>
										<tr>
											<td id="pr_name"><b>입찰수</b></td>
											<td>11</td>
										</tr>
										<tr>
											<td id="pr_name"><b>관심수</b></td>
											<td>75</td>
										</tr>
										<tr>
											<td id="pr_name"><b>조회수</b></td>
											<td>21,865</td>
										</tr>

									</table>

								</dd>
								<p class="timer" colspan="2" data-end-time="2022-08-18T10:00:00+09:00"></p>
							</dl>
						</div>
					</div> -->
				</div>
			</div> 

			<div class="fin_prod">
				<p id="fin_title">마감임박 상품</p>
				<div class="step_wrap">
					<div class="fin_prod_list_1 finlist" th:each="item:${endProcList}">
						<div class="img-box">
							<img th:if="${item.itemFile ne null}"
									th:src="@{/upload/}+${item.itemFile.itemfileNm}"
									style="width:284px; max-width:100%; height:180px; max-height:250px;"/>
								<img th:if="${item.itemFile eq null}"
										th:src="@{/upload/noimg.png}"/>	
						</div>
						<div class="con-box">
							<dl>
								<dt th:text="${item.itemNm}">네이처 하이크 에어텐트</dt>
								<dd style="min-height:40px;">
									<table>
										<tr>
											<td id="pr_name"><b>경매가</b></td>
											<td th:text="${item.itemStPrice}">734,640원</td>
										</tr>
										<tr>
											<td id="pr_name"><b>입찰수</b></td>
											<td>5</td>
										</tr>
										<tr>
											<td id="pr_name"><b>관심수</b></td>
											<td>65</td>
										</tr>
										<tr>
											<td id="pr_name"><b>조회수</b></td>
											<td th:text="${item.itemCnt}">4,764</td>
										</tr>

									</table>

								</dd>
								<p class="timer" colspan="2" data-end-time="2022-08-03T16:00:00+09:00"></p>
							</dl>
						</div>
					</div>
					<!-- <div class="fin_prod_list_2 finlist">
						<div class="img-box">
							<img src="/images/후리스.png"
								style="width:auto; max-width:100%; height:auto; max-height:250px;">
						</div>
						<div class="con-box">
							<dl>
								<dt>블랙야크 남여공용 후리스</dt>
								<dd style="min-height:40px;">
									<table>
										<tr>
											<td id="pr_name"><b>경매가</b></td>
											<td>39,050원</td>
										</tr>
										<tr>
											<td id="pr_name"><b>입찰수</b></td>
											<td>645</td>
										</tr>
										<tr>
											<td id="pr_name"><b>관심수</b></td>
											<td>2,153</td>
										</tr>
										<tr>
											<td id="pr_name"><b>조회수</b></td>
											<td>45,975</td>
										</tr>

									</table>

								</dd>
								<p class="timer" colspan="2" data-end-time="2022-08-06T17:27:00+09:00"></p>
							</dl>
						</div>
					</div>
					<div class="fin_prod_list_3 finlist">
						<div class="img-box">
							<img src="/images/자전거.png"
								style="width:auto; max-width:100%; height:auto; max-height:250px;">
						</div>
						<div class="con-box">
							<dl>
								<dt>2022 벤조 전기자전거</dt>
								<dd style="min-height:40px;">
									<table>
										<tr>
											<td id="pr_name"><b>경매가</b></td>
											<td>960,000원</td>
										</tr>
										<tr>
											<td id="pr_name"><b>입찰수</b></td>
											<td>7</td>
										</tr>
										<tr>
											<td id="pr_name"><b>관심수</b></td>
											<td>69</td>
										</tr>
										<tr>
											<td id="pr_name"><b>조회수</b></td>
											<td>11,467</td>
										</tr>

									</table>

								</dd>
								<p class="timer" colspan="2" data-end-time="2022-08-03T18:30:00+09:00"></p>
							</dl>
						</div>
					</div> -->
				</div>
			</div>
		</div>
	</div>
</body>

</html>