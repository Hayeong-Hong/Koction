<!DOCTYPE html>
<html lang="ko"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/layout}">
	<head>
		<meta charset="UTF-8">
		<title>index</title>   
		<th:block layout:fragment="css">
			<style>
				#loginForm{
					display: flex;
					width: 200px;
					margin: 20px auto 0;
					justify-content: center;
					align-items: center;
					flex-direction: column;
				}
				#userId{
					margin-bottom: 10px;
				}
			</style>
		</th:block>
		<th:block layout:fragment="script">
			<script>
		//로그인 시 아이디나 비밀번호가 틀렸을 경우 폼을 서브밋하지 않고
		//후처리를 위해 ajax로 처리
				$(function(){
					
					$("#loginForm").on("keydown", function(e){
						if(e.keyCode==13){
							$("#btnLogin").click();
						}
					})
					
					/*$("#btnLogin").on("click", () =>{
						$.ajax({
							url: '/user/login',
							type: 'post',
							data: $("#loginForm").serialize(),
							success: function (obj) {
								//1. 아이디 체크
								if(obj == 'idFail'){
									alert("존재하지 않는 아이디 입니다.");
									return false;
								}else if(obj == 'pwFail'){
									//2. 비밀번호 체크
									alert("비밀번호가 틀렸습니다.");
									return false;
								}
								//3. 로그인 처리
								location.href = "/"
							},
							error: function (e){
								console.log(e);
							}
						}); 
					});*/
				});
			</script>
		</th:block>
	</head>
	<body>
		<header th:replace="./fragments/header.html :: header"></header>
		<div layout:fragment="content" class="form-wrapper">
			<form id="loginForm" action="/user/loginProc" method="post">
				<div class="label-wrapper">
					<label for="userId">ID</label>
				</div>
				<input type="text" id="userId" name="userId" required>
		
				<div class="label-wrapper">
					<label for="userPw">PASSWORD</label>
				</div>
				<input type="password" id="userPw" name="userPw" required>
		
				<div style="display: block; margin: 20px auto;">
					<button type="submit" id="btnLogin">로그인</button>
				</div>
			</form>
		</div>
		<footer th:replace="./fragments/footer.html :: footer"></footer>
	</body>
</html>